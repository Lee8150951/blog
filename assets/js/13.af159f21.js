(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{508:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"git仓库创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git仓库创建"}},[s._v("#")]),s._v(" Git仓库创建")]),s._v(" "),a("p",[s._v("在GitHub中创建一个仓库，命名随意，后文使用"),a("REPO",[s._v("代替")])],1),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/03/20/AYqol6nrksDLaPd.png",alt:"捕获.PNG"}})]),s._v(" "),a("h2",{attrs:{id:"详细配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#详细配置"}},[s._v("#")]),s._v(" 详细配置")]),s._v(" "),a("p",[s._v("1、首先在"),a("code",[s._v("/.vuepress/config.js")]),s._v("中进行路径有关的配置")]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// config.js")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 部署路径")]),s._v("\n  base"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/<REPO>/'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("2、在/docs/文件夹同级目录下创建部署脚本，命名为deploy.sh")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 抛出异常")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入生成的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ./.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果发布到 https://<USERNAME>.github.io")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果发布到 https://<USERNAME>.github.io/<REPO>")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f git@github.com:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("USERNAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("REPO"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".git master:gh-pages\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])])]),a("p",[s._v("3、修改npm默认配置，通过"),a("code",[s._v("npm run deploy")]),s._v("直接运行脚本")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deploy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deploy.sh"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("注意：Windows系统下直接"),a("code",[s._v("deploy.sh")]),s._v("即可，在Linux系统下需要使用"),a("code",[s._v("shell deploy.sh")])])]),s._v(" "),a("p",[s._v("4、部署完成，此时在项目中会出现一个/.vuepress/dist/文件夹，里面存放的就是编译好的项目")]),s._v(" "),a("h2",{attrs:{id:"异常处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异常处理"}},[s._v("#")]),s._v(" 异常处理")]),s._v(" "),a("p",[s._v("我在部署过程中出现了脚本闪退的问题，通过逐行排查发现问题就出在")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f git@github.com:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("USERNAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("REPO"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".git master:gh-pages\n")])])]),a("p",[s._v("命令中，这条命令如果出现错误，比如push失败，cmd编译完成后是会直接关闭的。")]),s._v(" "),a("p",[s._v("逐行排查的结果显示："),a("code",[s._v("git@github.com: Permission denied (publickey). Could not read from remote repository")])]),s._v(" "),a("p",[s._v("产生该问题的主要原因：")]),s._v(" "),a("p",[s._v("Permission denied (publickey) 没有权限的publickey ，出现这错误一般是以下两种原因")]),s._v(" "),a("ul",[a("li",[s._v("客户端与服务端未生成 ssh key")]),s._v(" "),a("li",[s._v("客户端与服务端的ssh key不匹配")])]),s._v(" "),a("p",[s._v("解决办法我参考了"),a("code",[s._v("https://blog.csdn.net/ywl470812087/article/details/104459288")])]),s._v(" "),a("p",[s._v("按步骤解决即可")]),s._v(" "),a("h2",{attrs:{id:"完成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完成"}},[s._v("#")]),s._v(" 完成")]),s._v(" "),a("p",[s._v("访问"),a("code",[s._v("https://<USERNAME>.github.io/<REPO>/")]),s._v("即可展示界面，如果出现404错误，再运行一次"),a("code",[s._v("npm run deploy")]),s._v("试试")])])}),[],!1,null,null,null);t.default=n.exports}}]);